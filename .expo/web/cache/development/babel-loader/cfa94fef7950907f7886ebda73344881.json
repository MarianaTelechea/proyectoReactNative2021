{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/marianatelechea/Desktop/proyectoReactNative2021/src/components/MyCamera.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Camera } from 'expo-camera';\nimport { storage } from \"../firebase/config\";\n\nvar MyCamera = function (_Component) {\n  _inherits(MyCamera, _Component);\n\n  var _super = _createSuper(MyCamera);\n\n  function MyCamera(props) {\n    var _this;\n\n    _classCallCheck(this, MyCamera);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      photo: \"\"\n    };\n    _this.camera;\n    return _this;\n  }\n\n  _createClass(MyCamera, [{\n    key: \"takePhoto\",\n    value: function takePhoto() {\n      var _this2 = this;\n\n      this.camera.takePictureAsync().then(function (photo) {\n        _this2.setState({\n          photo: photo.uri\n        });\n      });\n    }\n  }, {\n    key: \"onReject\",\n    value: function onReject() {\n      this.setState({\n        photo: \"\"\n      });\n    }\n  }, {\n    key: \"onAccept\",\n    value: function onAccept() {\n      fetch(this.state.photo).then(function (response) {\n        return response.blob();\n      }).then(function (image) {\n        var storageRef = storage.ref(\"camera/\" + Date.now());\n        storageRef.put(image).then(function () {\n          console.log(\"SE SUBIO\");\n          storageRef.getDownloadURL().then(function (url) {\n            console.log(url);\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }\n      }, this.state.photo ? React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 25\n        }\n      }, React.createElement(Image, {\n        source: {\n          uri: this.state.photo\n        },\n        style: styles.preview,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 29\n        }\n      }), React.createElement(View, {\n        style: styles.btnContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 29\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this3.onReject();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 33\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 37\n        }\n      }, \"Rechazar\")), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this3.onAccept();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 33\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 37\n        }\n      }, \"Aceptar\")))) : React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 25\n        }\n      }, React.createElement(Camera, {\n        style: styles.camera,\n        type: Camera.Constants.Type.front,\n        ref: function ref(reference) {\n          return _this3.camera = reference;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 29\n        }\n      }), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this3.takePhoto();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 33\n        }\n      }, \"Sacar foto\"))));\n    }\n  }]);\n\n  return MyCamera;\n}(Component);\n\nexport { MyCamera as default };\nvar styles = StyleSheet.create({\n  camera: {\n    flex: 1,\n    width: \"100%\"\n  },\n  preview: {\n    flex: 6,\n    width: \"100%\"\n  },\n  btnContainer: {\n    flex: 1\n  }\n});","map":{"version":3,"sources":["/Users/marianatelechea/Desktop/proyectoReactNative2021/src/components/MyCamera.js"],"names":["React","Component","Camera","storage","MyCamera","props","state","photo","camera","takePictureAsync","then","setState","uri","fetch","response","blob","image","storageRef","ref","Date","now","put","console","log","getDownloadURL","url","styles","preview","btnContainer","onReject","onAccept","Constants","Type","front","reference","takePhoto","StyleSheet","create","flex","width"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Image } from 'react-native';\nimport { Camera } from 'expo-camera';\nimport { storage } from '../firebase/config';\n\nexport default class MyCamera extends Component{\n    constructor(props){\n        super(props);\n        this.state ={\n            photo: \"\"\n        }\n        this.camera; // sacandolo del estado, evitamos el bucle infinito\n    }\n\n    takePhoto(){\n        this.camera.takePictureAsync()\n        .then((photo)=>{\n            this.setState({\n                photo: photo.uri // direccion a la memoria cache de la compu o celu\n            })\n        })\n    }\n\n    onReject(){\n        this.setState({\n            photo: \"\"\n        })\n    }\n\n    onAccept(){\n        fetch(this.state.photo)\n        .then((response)=> response.blob())\n        .then((image) => {\n            const storageRef = storage.ref(\"camera/\"+ Date.now()); // lugar donde se va a guardar la imagen\n            storageRef.put(image) // contenido\n            .then(()=>{\n                console.log(\"SE SUBIO\");\n                storageRef.getDownloadURL()\n                .then((url)=>{\n                    console.log(url);\n                })\n            })\n        })\n    }\n\n    render(){\n        return(\n            <React.Fragment>\n                {\n                    this.state.photo ?\n                        <React.Fragment>\n                            <Image source = {{uri: this.state.photo}} style={styles.preview}/>\n                            <View style={styles.btnContainer}>\n                                <TouchableOpacity\n                                    onPress={()=>this.onReject()}\n                                >\n                                    <Text>Rechazar</Text>\n                                </TouchableOpacity>\n                                <TouchableOpacity\n                                    onPress={()=>this.onAccept()}\n                                >\n                                    <Text>Aceptar</Text>\n                                </TouchableOpacity>\n                            </View>\n                        </React.Fragment>\n                    :\n                        <React.Fragment>\n                            <Camera \n                                style={styles.camera}\n                                type={Camera.Constants.Type.front}\n                                ref={reference => this.camera = reference}\n                            />\n                            <TouchableOpacity\n                                onPress={()=> this.takePhoto()}\n                            >\n                                <Text>Sacar foto</Text>\n\n                            </TouchableOpacity>\n                        </React.Fragment>\n\n                }\n            </React.Fragment>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    camera:{\n        flex:1,\n        width: \"100%\"\n    },\n    preview:{\n        flex: 6,\n        width: \"100%\"\n    },\n    btnContainer: {\n        flex:1\n    }\n})"]},"metadata":{},"sourceType":"module"}